from calibre.web.feeds.recipes import BasicNewsRecipe

class Kathimerini(BasicNewsRecipe):
    title                  = 'Kathimerini'
    __author__             = 'jenniepet'
    description            = 'News from Greece'
    max_articles_per_feed  = 100
    oldest_article         = 1
    publisher              = 'Kathimerini'
    category               = 'news, GR'
    language               = 'el'
    encoding               = 'utf-8'
    conversion_options     = {'linearize_tables': True}
    no_stylesheets         = True
    remove_tags_before     = dict(id='site-body')
    remove_tags_after      = [dict(id='social')]
    remove_tags            = [dict(attrs={'class':['post-tools', 'edition edition_PRINT']})]
    feeds = [(u'1','http://www.kathimerini.gr/rss?i=news.el.search&q=&t=0&w=&c=&s=p&type=&edition=PRINT&author=0&fromDate=0&toDate=0'),
(u'2','http://www.kathimerini.gr/rss?i=news.el.search&q=&t=0&w=&c=&s=p&type=&edition=PRINT&author=0&fromDate=0&toDate=0&page=1'),
(u'3','http://www.kathimerini.gr/rss?i=news.el.search&q=&t=0&w=&c=&s=p&type=&edition=PRINT&author=0&fromDate=0&toDate=0&page=2'),
(u'4','http://www.kathimerini.gr/rss?i=news.el.search&q=&t=0&w=&c=&s=p&type=&edition=PRINT&author=0&fromDate=0&toDate=0&page=3'),
(u'5','http://www.kathimerini.gr/rss?i=news.el.search&q=&t=0&w=&c=&s=p&type=&edition=PRINT&author=0&fromDate=0&toDate=0&page=4')]

    def get_cover_url(self):
        import time
        return 'http://s.kathimerini.gr/resources/issue-cover/%s.jpg' %time.strftime('%d-%m-%Y')
